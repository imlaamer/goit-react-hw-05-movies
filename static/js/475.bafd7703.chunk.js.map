{"version":3,"file":"static/js/475.bafd7703.chunk.js","mappings":"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","sources":["components/Loader/Loader.jsx","webpack://react-homework-template/./src/components/MoviesList/MoviesList.module.css?de3d","components/MoviesList/MoviesList.jsx","webpack://react-homework-template/./src/components/LoadMoreBtn.jsx/LoadMoreBtn.module.css?9462","components/LoadMoreBtn.jsx/LoadMoreBtn.jsx","components/EmptyMoviesList/EmptyMoviesList.jsx","pages/HomePage.jsx"],"sourcesContent":["import { ThreeDots } from 'react-loader-spinner';\n\nfunction Loader() {\n  return (\n    <div\n      // className=\"loadingBox\"\n      style={{\n        width: '100vw',\n        height: '100vh',\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: 'rgba(0, 0, 0, 0.6)',\n      }}\n    >\n      <ThreeDots\n        visible={true}\n        height=\"100\"\n        width=\"100\"\n        color=\"#3F51B5\"\n        radius=\"9\"\n        ariaLabel=\"three-dots-loading\"\n        wrapperStyle={{}}\n        wrapperClass=\"\"\n      />\n    </div>\n  );\n}\n\nexport default Loader;\n","// extracted by mini-css-extract-plugin\nexport default {\"moviesList\":\"MoviesList_moviesList__P6SP5\",\"movieItem\":\"MoviesList_movieItem__p4FQU\",\"movieLink\":\"MoviesList_movieLink__QlD4H\",\"movieListImg\":\"MoviesList_movieListImg__4Luk2\",\"movieTitle\":\"MoviesList_movieTitle__CxO8p\"};","import css from './MoviesList.module.css';\nimport { NavLink, useLocation } from 'react-router-dom';\nimport { basePosterImgPath, defaultImg } from 'utils/constants';\n\nfunction MoviesList({ movies, moviesListRef }) {\n  const location = useLocation();\n\n  return (\n    <ul className={css.moviesList} ref={moviesListRef}>\n      {movies.map(({ id, title, poster_path, name = 'movie' }) => {\n        return (\n          <li key={id} className={css.movieItem}>\n            <NavLink\n              state={{ from: location }}\n              to={`/movies/${id}/`}\n              className={css.movieLink}\n            >\n              <img\n                src={\n                  poster_path\n                    ? basePosterImgPath + poster_path\n                    : `${defaultImg}`\n                }\n                alt={title ?? name}\n                width={200}\n                className={css.movieListImg}\n              />\n\n              <p className={css.movieTitle}> {title ?? name}</p>\n            </NavLink>\n          </li>\n        );\n      })}\n    </ul>\n  );\n}\n\nexport default MoviesList;\n","// extracted by mini-css-extract-plugin\nexport default {\"loadMoreBtnBox\":\"LoadMoreBtn_loadMoreBtnBox__Er+v7\",\"loadMoreBtn\":\"LoadMoreBtn_loadMoreBtn__efbIo\"};","import css from './LoadMoreBtn.module.css';\n\nfunction LoadMoreBtn({ onClick }) {\n  return (\n    <div className={css.loadMoreBtnBox}>\n      <button className={css.loadMoreBtn} type=\"button\" onClick={onClick}>\n        Load more\n      </button>\n    </div>\n  );\n}\n\nexport default LoadMoreBtn;\n","function EmptyMoviesList() {\n  return (\n    <div\n      style={{\n        marginTop: 200,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n      }}\n    >\n      <p style={{ textAlign: 'center', fontSize: 50, margin: 0 }}>\n        Sorry! <br />\n        There are no movies\n      </p>\n    </div>\n  );\n}\n\nexport default EmptyMoviesList;\n","import React, { useEffect, useRef, useState } from 'react';\nimport { getTrendingMovies } from 'services/api';\nimport { STATUSES } from 'utils/constants';\nimport MoviesList from 'components/MoviesList/MoviesList';\nimport Loader from 'components/Loader/Loader';\nimport ErrorMessage from 'components/ErrorMessage/ErrorMessage';\nimport LoadMoreBtn from 'components/LoadMoreBtn.jsx/LoadMoreBtn';\nimport EmptyMoviesList from 'components/EmptyMoviesList/EmptyMoviesList';\n\nfunction HomePage() {\n  const [status, setStatus] = useState(STATUSES.idle);\n  const [movies, setMovies] = useState([]);\n  const [error, setError] = useState(null);\n\n  const [page, setPage] = useState(1);\n  const [isLoadMore, setIsLoadMore] = useState(false);\n  const [isEmpty, setIsEmpty] = useState(false); //..\n  const moviesListRef = useRef(null);\n\n  useEffect(() => {\n    const fetchMovies = async () => {\n      try {\n        setStatus(STATUSES.pending);\n        const { results: moviesData, total_results } = await getTrendingMovies(\n          page\n        );\n\n        if (moviesData.length === 0) {\n          setIsEmpty(true);\n          setStatus(STATUSES.idle);\n          return;\n        }\n        setMovies(prevMovies => [...prevMovies, ...moviesData]);\n        setIsLoadMore(page < Math.ceil(total_results / 12));\n        setStatus(STATUSES.success);\n      } catch (error) {\n        setStatus(STATUSES.error);\n        setError(error);\n        console.log('Oops');\n      }\n    };\n    fetchMovies();\n  }, [page]);\n\n  const handleLoadMore = () => {\n    setPage(prevPage => prevPage + 1);\n    setTimeout(() => {\n      if (moviesListRef.current) {\n        function scrollDownOnLoadMore() {\n          const itemHeight =\n            moviesListRef.current.firstElementChild.getBoundingClientRect()\n              .height;\n          const topHeight =\n            moviesListRef.current.firstElementChild.getBoundingClientRect().top;\n          const itemsPerCollumn = window.innerHeight / itemHeight;\n          window.scrollTo({\n            top: itemHeight * itemsPerCollumn - 80 - topHeight, //..\n            behavior: 'smooth',\n          });\n        }\n        scrollDownOnLoadMore();\n      }\n    }, 500);\n  };\n\n  return (\n    <>\n      <h1 style={{ marginTop: 100, textAlign: 'center' }}>Trending today</h1>\n      {movies.length > 0 && (\n        <MoviesList movies={movies} moviesListRef={moviesListRef} />\n      )}\n      {isEmpty && <EmptyMoviesList />}\n      {isLoadMore && <LoadMoreBtn onClick={handleLoadMore} />}\n      {status === STATUSES.error && <ErrorMessage error={error} />}\n      {status === STATUSES.pending && <Loader className=\"loadingBox\" />}\n    </>\n  );\n}\n\nexport default HomePage;\n"],"names":["_jsx","style","width","height","position","top","left","display","justifyContent","alignItems","backgroundColor","children","ThreeDots","visible","color","radius","ariaLabel","wrapperStyle","wrapperClass","_ref","movies","moviesListRef","location","useLocation","className","css","ref","map","_ref2","id","title","poster_path","_ref2$name","name","_jsxs","NavLink","state","from","to","concat","src","basePosterImgPath","defaultImg","alt","onClick","type","marginTop","textAlign","fontSize","margin","_useState","useState","STATUSES","_useState2","_slicedToArray","status","setStatus","_useState3","_useState4","setMovies","_useState5","_useState6","error","setError","_useState7","_useState8","page","setPage","_useState9","_useState10","isLoadMore","setIsLoadMore","_useState11","_useState12","isEmpty","setIsEmpty","useRef","useEffect","fetchMovies","_asyncToGenerator","_regeneratorRuntime","_callee","_yield$getTrendingMov","moviesData","total_results","_context","prev","next","getTrendingMovies","sent","results","length","abrupt","prevMovies","_toConsumableArray","Math","ceil","t0","console","log","stop","apply","arguments","_Fragment","MoviesList","EmptyMoviesList","LoadMoreBtn","prevPage","setTimeout","current","itemHeight","firstElementChild","getBoundingClientRect","topHeight","itemsPerCollumn","window","innerHeight","scrollTo","behavior","scrollDownOnLoadMore","ErrorMessage","Loader"],"sourceRoot":""}